### 代理模式

代理模式（Proxy Pattern）是一种结构型设计模式，它允许通过代理对象来控制对原始对象的访问，以此为客户端提供间接访问原始对象的方式。

#### 代理模式由三个角色组成

- 抽象主题（Subject）：定义代理和原始对象的公共接口，这样代理和原始对象可以通过相同的接口进行访问。
- 原始对象（Real Subject）：定义了代理所代表的真实对象。
- 代理（Proxy）：维护一个指向原始对象的引用，并提供与原始对象相同的接口，从而可以在客户端与原始对象之间进行间接访问。

```
            +--------------+          +--------------+
            |    Subject   |          |    Proxy     |
            +--------------+          +--------------+
            | + Operation1 |<>------->| + Operation1 |
            | + Operation2 |  |       | + Operation2 |
            |      ...     |  |       |      ...     |
            +--------------+  |       +--------------+
                              |       | + realSubject|
                              |       +--------------+
                              |       | + Operation1 |
                              |       | + Operation2 |
                              |       |      ...     |
                              |       +--------------+
                              |
                              |
                              |       +--------------+
                              |       |  RealSubject |
                              |       +--------------+
                              |       | + Operation1 |
                              |       | + Operation2 |
                              |       |      ...     |
                              |       +--------------+

```
其中，Subject是一个抽象类或者接口，定义了真实主题和代理的公共接口，Proxy实现了Subject接口，其内部包含了一个指向RealSubject的引用，以此来实现对RealSubject的访问控制。RealSubject是真实的业务实现类。

在这个图中，Client通过Proxy来访问RealSubject，Proxy可以控制Client的访问权限，比如增加了缓存功能或者鉴权功能等。

> 代理模式的优点包括：
1. 代理模式能够保护真实主题，不直接暴露给客户端，客户端无法直接操作真实主题，提高了系统的安全性。 
2. 代理对象可以在客户端与真实主题之间起到中介的作用，可以对真实主题进行访问控制和管理。 
3. 代理模式实现了客户端和真实主题之间的解耦，增加了系统的灵活性和可扩展性。
> 代理模式的缺点包括：
1. 由于引入了代理对象，因此在访问真实主题时会增加一定的间接性，可能导致系统的性能略微降低。
增加了系统的复杂度和代码量。

总的来说，代理模式适用于需要控制对一个对象的访问、管理和保护的场景，例如需要限制对象的访问权限、需要缓存对象、需要远程访问对象等。